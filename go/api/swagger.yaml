---
swagger: "2.0"
info:
  description: "This is the API for the Estuary application."
  version: "0.0.0"
  title: "Estuary API"
  termsOfService: "http://estuary.tech"
  contact:
    name: "API Support"
    url: "https://docs.estuary.tech/feedback"
  license:
    name: "Apache 2.0 Apache-2.0 OR MIT"
    url: "https://github.com/application-research/estuary/blob/master/LICENSE.md"
host: "api.estuary.tech"
basePath: "/"
security:
- bearerAuth: []
paths:
  /admin/autoretrieve/init:
    post:
      tags:
      - "autoretrieve"
      summary: "Register autoretrieve server"
      description: "This endpoint registers a new autoretrieve server"
      produces:
      - "application/json"
      parameters:
      - name: "addresses"
        in: "formData"
        description: "Autoretrieve's comma-separated list of addresses"
        required: true
        type: "string"
        x-exportParamName: "Addresses"
      - name: "pubKey"
        in: "formData"
        description: "Autoretrieve's public key"
        required: true
        type: "string"
        x-exportParamName: "PubKey"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /admin/autoretrieve/list:
    get:
      tags:
      - "autoretrieve"
      summary: "List autoretrieve servers"
      description: "This endpoint lists all registered autoretrieve servers"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /admin/peering/peers:
    get:
      tags:
      - "admin"
      - "peering"
      - "peers"
      summary: "List all Peering peers"
      description: "This endpoint can be used to list all peers on Peering Service"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
    post:
      tags:
      - "admin"
      - "peering"
      - "peers"
      summary: "Add peers on Peering Service"
      description: "This endpoint can be used to add a Peer from the Peering Service"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
    delete:
      tags:
      - "admin"
      - "peering"
      - "peers"
      summary: "Remove peers on Peering Service"
      description: "This endpoint can be used to remove a Peer from the Peering Service"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "peerIds"
        description: "Peer ids"
        required: true
        schema:
          type: "array"
          items:
            type: "boolean"
        x-exportParamName: "PeerIds"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /admin/peering/start:
    post:
      tags:
      - "admin"
      - "peering"
      - "peers"
      summary: "Start Peering"
      description: "This endpoint can be used to start the Peering Service"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /admin/peering/status:
    get:
      tags:
      - "admin"
      - "peering"
      - "peers"
      summary: "Check Peering Status"
      description: "This endpoint can be used to check the Peering status"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /admin/peering/stop:
    post:
      tags:
      - "admin"
      - "peering"
      - "peers"
      summary: "Stop Peering"
      description: "This endpoint can be used to stop the Peering Service"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /admin/system/config:
    get:
      tags:
      - "admin"
      summary: "Get systems(estuary/shuttle) config"
      description: "This endpoint is used to get system configs."
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /admin/users:
    get:
      tags:
      - "admin"
      summary: "Get all users"
      description: "This endpoint is used to get all users."
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /autoretrieve/heartbeat:
    post:
      tags:
      - "autoretrieve"
      summary: "Marks autoretrieve server as up"
      description: "This endpoint updates the lastConnection field for autoretrieve"
      produces:
      - "application/json"
      parameters:
      - name: "token"
        in: "header"
        description: "Autoretrieve's auth token"
        required: true
        type: "string"
        x-exportParamName: "Token"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /collections/:
    get:
      tags:
      - "collections"
      summary: "List all collections"
      description: "This endpoint is used to list all collections. Whenever a user\
        \ logs on estuary, it will list all collections that the user has access to.\
        \ This endpoint provides a way to list all collections to the user."
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items:
              type: "array"
              items:
                $ref: "#/definitions/collections.Collection"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "404":
          description: "Not Found"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
    post:
      tags:
      - "collections"
      summary: "Create a new collection"
      description: "This endpoint is used to create a new collection. A collection\
        \ is a representaion of a group of objects added on the estuary. This endpoint\
        \ can be used to create a new collection."
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Collection name and description"
        required: true
        schema:
          $ref: "#/definitions/main.createCollectionBody"
        x-exportParamName: "Body"
      responses:
        "200":
          description: "OK"
          schema:
            $ref: "#/definitions/collections.Collection"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "404":
          description: "Not Found"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /collections/fs/add:
    post:
      tags:
      - "collections"
      summary: "Add a file to a collection"
      description: "This endpoint adds a file to a collection"
      produces:
      - "application/json"
      parameters:
      - name: "coluuid"
        in: "query"
        description: "Collection ID"
        required: true
        type: "string"
        x-exportParamName: "Coluuid"
      - name: "content"
        in: "query"
        description: "Content"
        required: true
        type: "string"
        x-exportParamName: "Content"
      - name: "path"
        in: "query"
        description: "Path to file"
        required: true
        type: "string"
        x-exportParamName: "Path"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /collections/{coluuid}:
    get:
      tags:
      - "collections"
      summary: "Get contents in a collection"
      description: "This endpoint is used to get contents in a collection. If no colpath\
        \ query param is passed"
      produces:
      - "application/json"
      parameters:
      - name: "coluuid"
        in: "path"
        description: "coluuid"
        required: true
        type: "string"
        x-exportParamName: "Coluuid"
      - name: "dir"
        in: "query"
        description: "Directory"
        required: false
        type: "string"
        x-exportParamName: "Dir"
        x-optionalDataType: "String"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
    post:
      tags:
      - "collections"
      summary: "Add contents to a collection"
      description: "This endpoint adds already-pinned contents (that have ContentIDs)\
        \ to a collection."
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - name: "coluuid"
        in: "path"
        description: "coluuid"
        required: true
        type: "string"
        x-exportParamName: "Coluuid"
      - in: "body"
        name: "contentIDs"
        description: "Content IDs to add to collection"
        required: true
        schema:
          type: "array"
          items:
            type: "integer"
        x-exportParamName: "ContentIDs"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
    delete:
      tags:
      - "collections"
      summary: "Deletes a collection"
      description: "This endpoint is used to delete an existing collection."
      parameters:
      - name: "coluuid"
        in: "path"
        description: "Collection ID"
        required: true
        type: "string"
        x-exportParamName: "Coluuid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /collections/{coluuid}/commit:
    post:
      tags:
      - "collections"
      summary: "Produce a CID of the collection contents"
      description: "This endpoint is used to save the contents in a collection, producing\
        \ a top-level CID that references all the current CIDs in the collection."
      produces:
      - "application/json"
      parameters:
      - name: "coluuid"
        in: "path"
        description: "coluuid"
        required: true
        type: "string"
        x-exportParamName: "Coluuid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /collections/{coluuid}/contents:
    delete:
      tags:
      - "collections"
      summary: "Deletes a content from a collection"
      description: "This endpoint is used to delete an existing content from an existing\
        \ collection. If two or more files with the same contentid exist in the collection,\
        \ delete the one in the specified path"
      produces:
      - "application/json"
      parameters:
      - name: "coluuid"
        in: "path"
        description: "Collection ID"
        required: true
        type: "string"
        x-exportParamName: "Coluuid"
      - name: "contentid"
        in: "path"
        description: "Content ID"
        required: true
        type: "string"
        x-exportParamName: "Contentid"
      - in: "body"
        name: "body"
        description: "Variable to use when filtering for files (must be either 'path'\
          \ or 'content_id')"
        required: true
        schema:
          $ref: "#/definitions/main.deleteContentFromCollectionBody"
        x-exportParamName: "Body"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/add:
    post:
      tags:
      - "content"
      summary: "Add new content"
      description: "This endpoint is used to upload new content."
      consumes:
      - "multipart/form-data"
      produces:
      - "application/json"
      parameters:
      - name: "data"
        in: "formData"
        description: "File to upload"
        required: true
        type: "file"
        x-exportParamName: "Data"
      - name: "filename"
        in: "formData"
        description: "Filenam to use for upload"
        required: false
        type: "string"
        x-exportParamName: "Filename"
        x-optionalDataType: "String"
      - name: "coluuid"
        in: "query"
        description: "Collection UUID"
        required: false
        type: "string"
        x-exportParamName: "Coluuid"
        x-optionalDataType: "String"
      - name: "replication"
        in: "query"
        description: "Replication value"
        required: false
        type: "integer"
        x-exportParamName: "Replication"
        x-optionalDataType: "Int32"
      - name: "ignore-dupes"
        in: "query"
        description: "Ignore Dupes true/false"
        required: false
        type: "string"
        x-exportParamName: "IgnoreDupes"
        x-optionalDataType: "String"
      - name: "lazy-provide"
        in: "query"
        description: "Lazy Provide true/false"
        required: false
        type: "string"
        x-exportParamName: "LazyProvide"
        x-optionalDataType: "String"
      - name: "dir"
        in: "query"
        description: "Directory"
        required: false
        type: "string"
        x-exportParamName: "Dir"
        x-optionalDataType: "String"
      responses:
        "200":
          description: "OK"
          schema:
            $ref: "#/definitions/util.ContentAddResponse"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/add-car:
    post:
      tags:
      - "content"
      summary: "Add Car object"
      description: "This endpoint is used to add a car object to the network. The\
        \ object can be a file or a directory."
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Car"
        required: true
        schema:
          type: "string"
        x-exportParamName: "Body"
      - name: "ignore-dupes"
        in: "query"
        description: "Ignore Dupes"
        required: false
        type: "string"
        x-exportParamName: "IgnoreDupes"
        x-optionalDataType: "String"
      - name: "filename"
        in: "query"
        description: "Filename"
        required: false
        type: "string"
        x-exportParamName: "Filename"
        x-optionalDataType: "String"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/add-ipfs:
    post:
      tags:
      - "content"
      summary: "Add IPFS object"
      description: "This endpoint is used to add an IPFS object to the network. The\
        \ object can be a file or a directory."
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "IPFS Body"
        required: true
        schema:
          $ref: "#/definitions/util.ContentAddIpfsBody"
        x-exportParamName: "Body"
      - name: "ignore-dupes"
        in: "query"
        description: "Ignore Dupes"
        required: false
        type: "string"
        x-exportParamName: "IgnoreDupes"
        x-optionalDataType: "String"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/aggregated/{content}:
    get:
      tags:
      - "content"
      summary: "Get aggregated content stats"
      description: "This endpoint returns aggregated content stats"
      produces:
      - "application/json"
      parameters:
      - name: "content"
        in: "path"
        description: "Content ID"
        required: true
        type: "string"
        x-exportParamName: "Content"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/all-deals:
    get:
      tags:
      - "content"
      summary: "Get all deals for a user"
      description: "This endpoint is used to get all deals for a user"
      produces:
      - "application/json"
      parameters:
      - name: "begin"
        in: "query"
        description: "Begin"
        required: true
        type: "string"
        x-exportParamName: "Begin"
      - name: "duration"
        in: "query"
        description: "Duration"
        required: true
        type: "string"
        x-exportParamName: "Duration"
      - name: "all"
        in: "query"
        description: "All"
        required: true
        type: "string"
        x-exportParamName: "All"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/bw-usage/{content}:
    get:
      tags:
      - "content"
      summary: "Get content bandwidth"
      description: "This endpoint returns content bandwidth"
      produces:
      - "application/json"
      parameters:
      - name: "content"
        in: "path"
        description: "Content ID"
        required: true
        type: "string"
        x-exportParamName: "Content"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/create:
    post:
      tags:
      - "content"
      summary: "Add a new content"
      description: "This endpoint adds a new content"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "req"
        description: "Content"
        required: true
        schema:
          $ref: "#/definitions/util.ContentCreateBody"
        x-exportParamName: "Req"
      - name: "ignore-dupes"
        in: "query"
        description: "Ignore Dupes"
        required: false
        type: "string"
        x-exportParamName: "IgnoreDupes"
        x-optionalDataType: "String"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/deals:
    get:
      tags:
      - "content"
      summary: "Content with deals"
      description: "This endpoint lists all content with deals"
      produces:
      - "application/json"
      parameters:
      - name: "limit"
        in: "query"
        description: "Limit"
        required: false
        type: "integer"
        x-exportParamName: "Limit"
        x-optionalDataType: "Int32"
      - name: "offset"
        in: "query"
        description: "Offset"
        required: false
        type: "integer"
        x-exportParamName: "Offset"
        x-optionalDataType: "Int32"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/ensure-replication/{datacid}:
    get:
      tags:
      - "content"
      summary: "Ensure Replication"
      description: "This endpoint ensures that the content is replicated to the specified\
        \ number of providers"
      produces:
      - "application/json"
      parameters:
      - name: "datacid"
        in: "path"
        description: "Data CID"
        required: true
        type: "string"
        x-exportParamName: "Datacid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/failures/{content}:
    get:
      tags:
      - "content"
      summary: "List all failures for a content"
      description: "This endpoint returns all failures for a content"
      produces:
      - "application/json"
      parameters:
      - name: "content"
        in: "path"
        description: "Content ID"
        required: true
        type: "string"
        x-exportParamName: "Content"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/importdeal:
    post:
      tags:
      - "content"
      summary: "Import a deal"
      description: "This endpoint imports a deal into the shuttle."
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "Import a deal"
        required: true
        schema:
          $ref: "#/definitions/main.importDealBody"
        x-exportParamName: "Body"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/list:
    get:
      tags:
      - "content"
      summary: "List all pinned content"
      description: "This endpoint lists all content"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/read/{cont}:
    get:
      tags:
      - "content"
      summary: "Read content"
      description: "This endpoint reads content from the blockstore"
      produces:
      - "application/json"
      parameters:
      - name: "cont"
        in: "path"
        description: "CID"
        required: true
        type: "string"
        x-exportParamName: "Cont"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/staging-zones:
    get:
      tags:
      - "content"
      summary: "Get staging zone for user"
      description: "This endpoint is used to get staging zone for user."
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/stats:
    get:
      tags:
      - "content"
      summary: "Get content statistics"
      description: "This endpoint is used to get content statistics. Every content\
        \ stored in the network (estuary) is tracked by a unique ID which can be used\
        \ to get information about the content. This endpoint will allow the consumer\
        \ to get the collected stats of a conten"
      produces:
      - "application/json"
      parameters:
      - name: "limit"
        in: "query"
        description: "limit"
        required: true
        type: "string"
        x-exportParamName: "Limit"
      - name: "offset"
        in: "query"
        description: "offset"
        required: true
        type: "string"
        x-exportParamName: "Offset"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/status/{id}:
    get:
      tags:
      - "content"
      summary: "Content Status"
      description: "This endpoint returns the status of a content"
      produces:
      - "application/json"
      parameters:
      - name: "id"
        in: "path"
        description: "Content ID"
        required: true
        type: "integer"
        x-exportParamName: "Id"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /content/{id}:
    get:
      tags:
      - "content"
      summary: "Content"
      description: "This endpoint returns a content by its ID"
      produces:
      - "application/json"
      parameters:
      - name: "id"
        in: "path"
        description: "Content ID"
        required: true
        type: "integer"
        x-exportParamName: "Id"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /deal/estimate:
    post:
      tags:
      - "deals"
      summary: "Estimate the cost of a deal"
      description: "This endpoint estimates the cost of a deal"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "The size of the deal in bytes, the replication factor, and the\
          \ duration of the deal in blocks"
        required: true
        schema:
          $ref: "#/definitions/main.estimateDealBody"
        x-exportParamName: "Body"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /deal/info/{dealid}:
    get:
      tags:
      - "deals"
      summary: "Get Deal Info"
      description: "This endpoint returns the deal info for a deal"
      produces:
      - "application/json"
      parameters:
      - name: "dealid"
        in: "path"
        description: "Deal ID"
        required: true
        type: "integer"
        x-exportParamName: "Dealid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /deal/proposal/{propcid}:
    get:
      tags:
      - "deals"
      summary: "Get Proposal"
      description: "This endpoint returns the proposal for a deal"
      produces:
      - "application/json"
      parameters:
      - name: "propcid"
        in: "path"
        description: "Proposal CID"
        required: true
        type: "string"
        x-exportParamName: "Propcid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /deal/query/{miner}:
    get:
      tags:
      - "deals"
      summary: "Query Ask"
      description: "This endpoint returns the ask for a given CID"
      produces:
      - "application/json"
      parameters:
      - name: "miner"
        in: "path"
        description: "CID"
        required: true
        type: "string"
        x-exportParamName: "Miner"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /deal/status-by-proposal/{propcid}:
    get:
      tags:
      - "deals"
      summary: "Get Deal Status by PropCid"
      description: "Get Deal Status by PropCid"
      produces:
      - "application/json"
      parameters:
      - name: "propcid"
        in: "path"
        description: "PropCid"
        required: true
        type: "string"
        x-exportParamName: "Propcid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /deal/status/{miner}/{propcid}:
    get:
      tags:
      - "deals"
      summary: "Deal Status"
      description: "This endpoint returns the status of a deal"
      produces:
      - "application/json"
      parameters:
      - name: "miner"
        in: "path"
        description: "Miner"
        required: true
        type: "string"
        x-exportParamName: "Miner"
      - name: "propcid"
        in: "path"
        description: "Proposal CID"
        required: true
        type: "string"
        x-exportParamName: "Propcid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /deal/transfer/in-progress:
    get:
      tags:
      - "deals"
      summary: "Transfer In Progress"
      description: "This endpoint returns the in-progress transfers"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /deal/transfer/status:
    post:
      tags:
      - "deals"
      summary: "Transfer Status"
      description: "This endpoint returns the status of a transfer"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "chanid"
        description: "Channel ID"
        required: true
        schema:
          $ref: "#/definitions/main.ChannelIDParam"
        x-exportParamName: "Chanid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /deals/failures:
    get:
      tags:
      - "deals"
      summary: "Get storage failures for user"
      description: "This endpoint returns a list of storage failures for user"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /deals/make/{miner}:
    post:
      tags:
      - "deals"
      summary: "Make Deal"
      description: "This endpoint makes a deal for a given content and miner"
      produces:
      - "application/json"
      parameters:
      - name: "miner"
        in: "path"
        description: "Miner"
        required: true
        type: "string"
        x-exportParamName: "Miner"
      - in: "body"
        name: "dealRequest"
        description: "Deal Request"
        required: true
        schema:
          type: "string"
        x-exportParamName: "DealRequest"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /deals/status/{deal}:
    get:
      tags:
      - "deals"
      summary: "Get Deal Status"
      description: "This endpoint returns the status of a deal"
      produces:
      - "application/json"
      parameters:
      - name: "deal"
        in: "path"
        description: "Deal ID"
        required: true
        type: "integer"
        x-exportParamName: "Deal"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /net/addrs:
    get:
      tags:
      - "net"
      summary: "Net Addrs"
      description: "This endpoint is used to get net addrs"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /pinning/pins:
    get:
      tags:
      - "pinning"
      summary: "List all pin status objects"
      description: "This endpoint lists all pin status objects"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "404":
          description: "Not Found"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
    post:
      tags:
      - "pinning"
      summary: "Add and pin object"
      description: "This endpoint adds a pin to the IPFS daemon."
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "pin"
        description: "Pin Body {cid:cid, name:name}"
        required: true
        schema:
          $ref: "#/definitions/types.IpfsPin"
        x-exportParamName: "Pin"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /pinning/pins/{pinid}:
    get:
      tags:
      - "pinning"
      summary: "Get a pin status object"
      description: "This endpoint returns a pin status object."
      produces:
      - "application/json"
      parameters:
      - name: "pinid"
        in: "path"
        description: "cid"
        required: true
        type: "string"
        x-exportParamName: "Pinid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
    post:
      tags:
      - "pinning"
      summary: "Replace a pinned object"
      description: "This endpoint replaces a pinned object."
      produces:
      - "application/json"
      parameters:
      - name: "pinid"
        in: "path"
        description: "Pin ID"
        required: true
        type: "string"
        x-exportParamName: "Pinid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
    delete:
      tags:
      - "pinning"
      summary: "Delete a pinned object"
      description: "This endpoint deletes a pinned object."
      produces:
      - "application/json"
      parameters:
      - name: "pinid"
        in: "path"
        description: "Pin ID"
        required: true
        type: "string"
        x-exportParamName: "Pinid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /public/by-cid/{cid}:
    get:
      tags:
      - "public"
      summary: "Get Content by Cid"
      description: "This endpoint returns the content associated with a CID"
      produces:
      - "application/json"
      parameters:
      - name: "cid"
        in: "path"
        description: "Cid"
        required: true
        type: "string"
        x-exportParamName: "Cid"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /public/deals/failures:
    get:
      tags:
      - "deals"
      summary: "Get storage failures"
      description: "This endpoint returns a list of storage failures"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /public/info:
    get:
      tags:
      - "public"
      summary: "Get public node info"
      description: "This endpoint returns information about the node"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /public/metrics/deals-on-chain:
    get:
      tags:
      - "public"
      - "metrics"
      summary: "Get deal metrics"
      description: "This endpoint is used to get deal metrics"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /public/miners:
    get:
      tags:
      - "public"
      - "net"
      summary: "Get all miners"
      description: "This endpoint returns all miners"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /public/miners/deals/{miner}:
    get:
      tags:
      - "public"
      - "miner"
      summary: "Get all miners deals"
      description: "This endpoint returns all miners deals"
      produces:
      - "application/json"
      parameters:
      - name: "miner"
        in: "path"
        description: "Filter by miner"
        required: true
        type: "string"
        x-exportParamName: "Miner"
      - name: "ignore-failed"
        in: "query"
        description: "Ignore Failed"
        required: false
        type: "string"
        x-exportParamName: "IgnoreFailed"
        x-optionalDataType: "String"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /public/miners/failures/{miner}:
    get:
      tags:
      - "public"
      - "net"
      summary: "Get all miners"
      description: "This endpoint returns all miners"
      produces:
      - "application/json"
      parameters:
      - name: "miner"
        in: "path"
        description: "Filter by miner"
        required: true
        type: "string"
        x-exportParamName: "Miner"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /public/miners/stats/{miner}:
    get:
      tags:
      - "public"
      - "miner"
      summary: "Get miner stats"
      description: "This endpoint returns miner stats"
      produces:
      - "application/json"
      parameters:
      - name: "miner"
        in: "path"
        description: "Filter by miner"
        required: true
        type: "string"
        x-exportParamName: "Miner"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /public/miners/storage/query/{miner}:
    get:
      tags:
      - "deals"
      summary: "Query Ask"
      description: "This endpoint returns the ask for a given CID"
      produces:
      - "application/json"
      parameters:
      - name: "miner"
        in: "path"
        description: "CID"
        required: true
        type: "string"
        x-exportParamName: "Miner"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /public/net/addrs:
    get:
      tags:
      - "public"
      - "net"
      summary: "Net Addrs"
      description: "This endpoint is used to get net addrs"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items:
              type: "string"
  /public/net/peers:
    get:
      tags:
      - "public"
      - "net"
      summary: "Net Peers"
      description: "This endpoint is used to get net peers"
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items:
              type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /public/stats:
    get:
      tags:
      - "public"
      summary: "Public stats"
      description: "This endpoint is used to get public stats."
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /user/api-keys:
    get:
      tags:
      - "User"
      summary: "Get API keys for a user"
      description: "This endpoint is used to get API keys for a user. In estuary,\
        \ each user can be given multiple API keys (tokens). This endpoint can be\
        \ used to retrieve all available API keys for a given user."
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "array"
            items:
              type: "array"
              items:
                $ref: "#/definitions/main.getApiKeysResp"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "404":
          description: "Not Found"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
    post:
      tags:
      - "User"
      summary: "Create API keys for a user"
      description: "This endpoint is used to create API keys for a user. In estuary,\
        \ each user is given an API key to access all features."
      produces:
      - "application/json"
      parameters:
      - name: "expiry"
        in: "query"
        description: "Expiration - Expiration - Valid time units are ns, us (or \
          s),  ms,  s,  m,  h.  for  example  300h"
        required: false
        type: "string"
        x-exportParamName: "Expiry"
        x-optionalDataType: "String"
      - name: "perms"
        in: "query"
        description: "Permissions -- currently unused"
        required: false
        type: "string"
        x-exportParamName: "Perms"
        x-optionalDataType: "String"
      responses:
        "200":
          description: "OK"
          schema:
            $ref: "#/definitions/main.getApiKeysResp"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "404":
          description: "Not Found"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /user/api-keys/{key_or_hash}:
    delete:
      tags:
      - "User"
      summary: "Revoke a User API Key."
      description: "This endpoint is used to revoke a user API key. In estuary, every\
        \ user is assigned with an API key, this API key is generated and issued for\
        \ each user and is primarily used to access all estuary features. This endpoint\
        \ can be used to revoke the API key that's assigned to the user. Revoked API\
        \ keys are completely deleted and are not recoverable."
      produces:
      - "application/json"
      parameters:
      - name: "key_or_hash"
        in: "path"
        description: "Key or Hash"
        required: true
        type: "string"
        x-exportParamName: "KeyOrHash"
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /user/export:
    get:
      tags:
      - "User"
      summary: "Export user data"
      description: "This endpoint is used to get API keys for a user."
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
  /user/stats:
    get:
      tags:
      - "User"
      summary: "Create API keys for a user"
      description: "This endpoint is used to create API keys for a user."
      produces:
      - "application/json"
      parameters: []
      responses:
        "200":
          description: "OK"
          schema:
            type: "string"
        "400":
          description: "Bad Request"
          schema:
            $ref: "#/definitions/util.HttpError"
        "500":
          description: "Internal Server Error"
          schema:
            $ref: "#/definitions/util.HttpError"
securityDefinitions:
  bearerAuth:
    type: "apiKey"
    name: "Authorization"
    in: "header"
definitions:
  collections.Collection:
    type: "object"
    properties:
      cid:
        type: "string"
      createdAt:
        type: "string"
      description:
        type: "string"
      name:
        type: "string"
      userId:
        type: "integer"
      uuid:
        type: "string"
    example:
      createdAt: "createdAt"
      name: "name"
      description: "description"
      userId: 0
      uuid: "uuid"
      cid: "cid"
  main.ChannelIDParam:
    type: "object"
    properties:
      id:
        type: "integer"
      initiator:
        type: "string"
      responder:
        type: "string"
  main.createCollectionBody:
    type: "object"
    properties:
      description:
        type: "string"
      name:
        type: "string"
  main.deleteContentFromCollectionBody:
    type: "object"
    properties:
      by:
        type: "string"
      value:
        type: "string"
  main.estimateDealBody:
    type: "object"
    properties:
      durationBlks:
        type: "integer"
      replication:
        type: "integer"
      size:
        type: "integer"
      verified:
        type: "boolean"
  main.getApiKeysResp:
    type: "object"
    properties:
      expiry:
        type: "string"
      label:
        type: "string"
      token:
        type: "string"
      tokenHash:
        type: "string"
    example:
      expiry: "expiry"
      label: "label"
      tokenHash: "tokenHash"
      token: "token"
  main.importDealBody:
    type: "object"
    properties:
      coluuid:
        type: "string"
      dealIDs:
        type: "array"
        items:
          type: "integer"
      dir:
        type: "string"
      name:
        type: "string"
  types.IpfsPin:
    type: "object"
    properties:
      cid:
        type: "string"
      meta:
        type: "object"
        properties: {}
      name:
        type: "string"
      origins:
        type: "array"
        items:
          type: "string"
  util.ContentAddIpfsBody:
    type: "object"
    properties:
      coluuid:
        type: "string"
      dir:
        type: "string"
      filename:
        type: "string"
      peers:
        type: "array"
        items:
          type: "string"
      root:
        type: "string"
  util.ContentAddResponse:
    type: "object"
    properties:
      cid:
        type: "string"
      estuaryId:
        type: "integer"
      providers:
        type: "array"
        items:
          type: "string"
      retrieval_url:
        type: "string"
    example:
      retrieval_url: "retrieval_url"
      estuaryId: 0
      providers:
      - "providers"
      - "providers"
      cid: "cid"
  util.ContentCreateBody:
    type: "object"
    properties:
      coluuid:
        type: "string"
      dir:
        type: "string"
      location:
        type: "string"
      name:
        type: "string"
      root:
        type: "string"
      type:
        type: "integer"
  util.HttpError:
    type: "object"
    properties:
      code:
        type: "integer"
      details:
        type: "string"
      reason:
        type: "string"
